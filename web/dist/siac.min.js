(function(t,e){for(var a in e)t[a]=e[a]})(window,function(e){function t(a){if(i[a])return i[a].exports;var n=i[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var i={};return t.m=e,t.c=i,t.d=function(e,i,a){t.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:a})},t.r=function(e){'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(e,'__esModule',{value:!0})},t.t=function(e,i){if(1&i&&(e=t(e)),8&i)return e;if(4&i&&'object'==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(t.r(a),Object.defineProperty(a,'default',{enumerable:!0,value:e}),2&i&&'string'!=typeof e)for(var n in e)t.d(a,n,function(t){return e[t]}.bind(null,n));return a},t.n=function(e){var i=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(i,'a',i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=0)}([function(e,t,i){e.exports=i(10)},function(){var e=Math.min,t=Math.max;window.siacState={selectedDecks:['-1'],timeout:null,isFrozen:!1,searchOnSelection:!0,searchOnTyping:!0,keepPositionAtRendering:!1},window.lastHadResults=!1,window.loadingTimer=null,window.calTimer=null,window.gridView=!1,window.tagHoverCB=null,window.tagHoverTimeout=750,window.searchMaskTimer=null,window.$fields=null,window.byId=function(e){return document.getElementById(e)},window.sendContent=function(e){if(e&&e.repeat||null!=pdfDisplayed||siacState.isFrozen)return;if(!$fields.text())return;let t='';showLoading('Typing'),$fields.each(function(e,i){t+=i.innerHTML+'\x1F'}),pycmd('siac-r-fld '+siacState.selectedDecks.toString()+' ~ '+t)},window.searchCurrentField=function(){if(!(displayedNoteId||siacState.isFrozen)){let e=$('.field:focus').first();if(e.length){let i=e.text();i&&0!==i.trim().length&&(showLoading('Typing'),pycmd('siac-r-fld '+siacState.selectedDecks.toString()+' ~ '+i))}}},window.sendSearchFieldContent=function(){showLoading('Searchbar'),html=byId('siac-browser-search-inp').value+'\x1F',pycmd('siac-r-srch-db '+siacState.selectedDecks.toString()+' ~ '+html)},window.searchFor=function(e){showLoading('Note Search'),e+='\x1F',pycmd('siac-r-fld '+siacState.selectedDecks.toString()+' ~ '+e)},window.updateSelectedDecks=function(e){siacState.selectedDecks=[];let t='';e&&$(e).toggleClass('selected'),$('.deck-list-item.selected').each(function(){$(this).data('id')&&(siacState.selectedDecks.push($(this).data('id')),t+=' '+$(this).data('id'))}),pycmd('deckSelection'+t)},window.selectAllDecks=function(){$('.deck-list-item').addClass('selected'),updateSelectedDecks()},window.unselectAllDecks=function(){$('.deck-list-item').removeClass('selected'),updateSelectedDecks()},window.selectDeckWithId=function(e){$('.deck-list-item').removeClass('selected'),$('.deck-list-item').each(function(){$(this).data('id')==e&&$(this).addClass('selected')}),updateSelectedDecks()},window.selectDeckAndSubdecksWithId=function(e){$('.deck-list-item').removeClass('selected'),$(`.deck-list-item[data-id=${e}]`).addClass('selected'),$(`.deck-list-item[data-id=${e}] .deck-list-item`).addClass('selected'),updateSelectedDecks()},window.fixRetMarkWidth=function(e){e&&0<e.parentElement.getElementsByClassName('retMark').length&&0==e.parentElement.getElementsByClassName('retMark')[0].style.maxWidth.length&&(e.parentElement.getElementsByClassName('retMark')[0].style.maxWidth=e.offsetWidth+'px')},window.expandRankingLbl=function(e){fixRetMarkWidth(e),null===e.getElementsByClassName('rankingLblAddInfo')[0].offsetParent?(e.getElementsByClassName('rankingLblAddInfo')[0].style.display='inline',e.getElementsByClassName('editedStamp')[0].style.display='none',0!==e.parentElement.getElementsByClassName('siac-susp-lbl').length&&(e.parentElement.getElementsByClassName('siac-susp-lbl')[0].style.display='none')):(e.getElementsByClassName('rankingLblAddInfo')[0].style.display='none',e.getElementsByClassName('editedStamp')[0].style.display='inline',0!==e.parentElement.getElementsByClassName('siac-susp-lbl').length&&(e.parentElement.getElementsByClassName('siac-susp-lbl')[0].style.display='block'))},window.expandCard=function(e){pycmd('siac-note-stats '+e)},window.pinMouseLeave=function(e){$(e).css('opacity','0')},window.pinMouseEnter=function(e){$(e).css('opacity','1')},window.cardMouseEnter=function(e,t,i='full'){'full'==i?$(`#btnBar-${t}`).css('opacity','1'):$(`#btnBarSmp-${t}`).css('opacity','1')},window.showLoading=function(e){loadingTimer=setTimeout(function(){byId('searchInfo').innerHTML=`<table><tr><td>Status</td><td><b>Searching</b></td></tr><tr><td>Source</td><td><i>${e}</i></td></tr></table>`},1e3)},window.totalOffset=function(e){var t=0,i=0;do t+=e.offsetTop||0,i+=e.offsetLeft||0,e=e.offsetParent;while(e);return{top:t,left:i}},window.cardMouseLeave=function(e,t,i='full'){setTimeout(function(){'full'==i?!$('#btnBar-'+t).is(':hover')&&$('#btnBar-'+t).css('opacity','0'):!$('#btnBarSmp-'+t).is(':hover')&&$('#btnBarSmp-'+t).css('opacity','0')},100)},window.tagMouseEnter=function(e){showTagInfoOnHover&&e&&e.parentElement&&!displayedNoteId&&(tagHoverCB=setTimeout(function(){e&&e.parentElement&&e.parentElement.querySelector(':hover')===e&&!byId('siac-tag-info-box-'+$(e).data('stamp'))&&pycmd('siac-tag-info '+$(e).data('stamp')+' '+$(e).data('name'))},tagHoverTimeout))},window.showTagInfo=function(e){let t=$(e).data('stamp');$(e).css('z-index','9999'),e&&$('#greyout').show();let a=totalOffset(e);a.top+=17;let n=document.getElementsByClassName('siac-tag-info-box');e.parentElement.id&&'tagContainer'===e.parentElement.id?a.top-=byId('tagContainer').scrollTop:1<n.length?0<=e.parentElement.parentElement.parentElement.className.indexOf('siac-tag-info-box-left')&&(a.top-=e.parentElement.parentElement.parentElement.scrollTop):null===byId('cal-info').offsetParent?a.top-=byId('searchResults').scrollTop:a.top-=byId('cal-info-notes').scrollTop;let s='siac-tag-info-box-'+t;a.left>window.outerWidth-a.left&&(a.left-=$('#siac-tag-info-box-'+t).outerWidth(),a.left+=$(e).outerWidth()+2);let d=0;for(var o=0;o<n.length;o++)+$(n[o]).css('z-index')>d&&(d=+$(n[o]).css('z-index'));if($('#siac-tag-info-box-'+t).css('top',a.top).css('left',a.left).css('z-index',d+1),a.top>window.outerHeight-a.top){byId(s).style.visibility='hidden',byId(s).style.display='block';let e=17;1<n.length&&(e=15),$('#'+s).css('top',a.top-$('#'+s).outerHeight()-e),byId(s).style.visibility='visible'}else byId(s).style.display='block'},window.tagMouseLeave=function(e){let t=$(e).data('stamp');if(!($('#siac-tag-info-box-'+t+':hover').length||$(`.tagLbl[data-stamp='${t}']:hover`).length)){let i=document.getElementsByClassName('siac-tag-info-box'),n=+$(e).css('z-index'),s=$('.siac-tag-info-box:hover').first();if(!s.length&&!$(`.tagLbl[data-stamp]:hover`).length)return $('.siac-tag-info-box').remove(),$('.tagLbl').css('z-index','4'),void $('#greyout').hide();if(s.length){let t=+s.css('z-index');if(e.id&&t>n)return;for(var a=0;a<i.length;a++)+$(i[a]).css('z-index')>t&&($(i[a]).remove(),a--)}$(`.tagLbl[data-stamp='${t}']`).first().css('z-index','4'),byId('siac-tag-info-box-'+t)&&$('#siac-tag-info-box-'+t).remove(),(!i||1>i.length)&&$('#greyout').hide()}},window.tagInfoBoxClicked=function(e){let t=+$(e).css('z-index'),a=document.getElementsByClassName('siac-tag-info-box');for(var n=0;n<a.length;n++)+$(a[n]).css('z-index')<t&&($(a[n]).remove(),n--)},window.appendToField=function(e,t){$(`.field:eq(${e})`).text().length?$(`.field:eq(${e})`).append('<br/>'+t):$(`.field:eq(${e})`).html(t),pycmd(`blur:${e}:${currentNoteId}:${$(`.field:eq(${e})`).html()}`)},window.getSelectionText=function(){if(siacState.searchOnSelection&&!siacState.isFrozen){var e='';window.getSelection?e=window.getSelection().toString():document.selection&&'Control'!=document.selection.type&&(e=document.selection.createRange().text),0<e.trim().length&&'&nbsp;'!=e&&(showLoading('Selection'),pycmd('siac-r-fld-selected '+siacState.selectedDecks.toString()+' ~ '+e))}},window.searchForUserNote=function(e,t){t&&0!==t.value.length&&t.value.trim()&&(13==e.keyCode?(t.id&&(t.parentElement.parentElement.style.display='none'),pycmd('siac-r-user-note-search-inp '+t.value)):t.id&&('Escape'===e.key||'Esc'===e.key)?t.parentElement.style.display='none':(clearTimeout(searchMaskTimer),searchMaskTimer=setTimeout(function(){pycmd('siac-r-user-note-search-inp '+t.value)},800)))},window.searchUserNoteTag=function(t,e){t.ctrlKey||t.metaKey?pycmd('siac-create-note-tag-prefill '+e):pycmd('siac-r-user-note-search-tag '+e)},window.switchLeftRight=function(){let e=byId('leftSide'),t=byId('siac-right-side');'leftSide'===e.parentNode.children[0].id?(e.parentNode.insertBefore(t,e),$(document.body).addClass('siac-left-right-switched'),pycmd('siac-switch-left-right true')):(e.parentNode.insertBefore(e,t),$(document.body).removeClass('siac-left-right-switched'),pycmd('siac-switch-left-right false'))},window.onWindowResize=function(e=!0){let t=byId('topbutsOuter').offsetHeight+3;byId('outerWr').style.marginTop=t+'px',byId('outerWr').style.height=`calc(100vh - ${t}px)`,$('#switchBtn').is(':visible')||($('#leftSide').css('display','flex'),$('#outerWr').css('display','flex').removeClass('onesided'),byId('switchBtn').innerHTML='&#10149; Search'),e&&'undefined'!=typeof pdfDisplayed&&pdfDisplayed&&(this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){pdfDisplayed&&pdfFitToPage()},300))},window.setHighlighting=function(e){let t=$(e).is(':checked')?'on':'off';pycmd('siac-toggle-highlight '+t)},window.setTagSearch=function(e){let t=$(e).is(':checked')?'on':'off';pycmd('tagSearch '+t)},window.tagClick=function(e){if($(e).data('tags')&&$(e).data('tags')==$(e).data('name'))return $('#a-modal').show(),void pycmd('siac-render-tags '+$(e).data('tags'));let t=$(e).data('target')||$(e).data('name');$('.siac-tag-info-box').remove(),$('#greyout').hide(),pycmd('siac-tag-clicked '+t)},window.noteSidebarExpandAll=function(){$('#siac-notes-sidebar .exp').each(function(e,t){let i=$(t);i.text().length&&'[+]'===i.text()&&(i.text('[-]'),i.parent().parent().children('ul').toggle())})},window.noteSidebarCollapseAll=function(){$('#siac-notes-sidebar .exp').each(function(e,t){let i=$(t);i.text().length&&'[-]'===i.text()&&(i.text('[+]'),i.parent().parent().children('ul').toggle())})},window.deleteNote=function(e){byId('siac-del-modal').innerHTML='<center style="margin: 20px 0 20px 0;">Deleting...</center>',setTimeout(function(){pycmd('siac-delete-user-note '+e)},80)},window.synInputKeyup=function(e,t){13==e.keyCode&&t.value&&pycmd('siac-save-synonyms '+t.value)},window.synonymSetKeydown=function(e,t,i){13==e.keyCode&&t.innerHTML.length&&(pycmd('siac-edit-synonyms '+i+' '+t.innerHTML),e.preventDefault(),$(t).blur())},window.searchSynset=function(e){let t=e.parentElement.parentElement.children[0].children[0].innerHTML;t&&pycmd('siac-r-synset-search '+t)},window.updateFieldToExclude=function(e,t,i){$(e).is(':checked')?pycmd('siac-update-field-to-exclude '+t+' '+i+' false'):pycmd('siac-update-field-to-exclude '+t+' '+i+' true')},window.updateFieldToHideInResult=function(e,t,i){$(e).is(':checked')?pycmd('siac-update-field-to-hide-in-results '+t+' '+i+' false'):pycmd('siac-update-field-to-hide-in-results '+t+' '+i+' true')},window.setSearchOnTyping=function(e,t=!0){siacState.searchOnTyping=e,e?($('.field').on('keydown.siac',fieldKeypress),t&&sendContent()):$('.field').off('keydown.siac',fieldKeypress),sendSearchOnTyping()},window.sendSearchOnTyping=function(){pycmd('siac-config-bool searchOnTyping '+siacState.searchOnTyping)},window.sendSearchOnSelection=function(){pycmd('siac-config-bool searchOnSelection '+siacState.searchOnSelection)},window.fieldKeypress=function(e){return 13==e.keyCode||9==e.keyCode||91==e.keyCode||37<=e.keyCode&&40>=e.keyCode||e.ctrlKey||e.altKey||(siacState.timeout&&(clearTimeout(siacState.timeout),siacState.timeout=null),siacState.timeout=setTimeout(function(){sendContent(e)},delayWhileTyping)),!0},window.searchMaskKeypress=function(e){13===e.keyCode&&sendSearchFieldContent()},window.pinCard=function(e,t){$('#cW-'+t).css('padding','3px 4px 5px 5px'),$('#cW-'+t).css('font-size','9px');let i=byId('cW-'+t).getElementsByClassName('rankingLblAddInfo')[0],a=byId('cW-'+t).getElementsByClassName('editedStamp')[0];$('#cW-'+t).html('<span>&#128204;</span>'),byId('cW-'+t).appendChild(i),byId('cW-'+t).appendChild(a),$('#'+t).parents().first().addClass('pinned'),updatePinned()},window.searchCard=function(e){let t=$(e).parent().next().html();showLoading('Note Search'),pycmd('siac-r-fld '+siacState.selectedDecks.toString()+' ~ '+t)},window.searchCardFromFloated=function(e){let t=byId(e).innerHTML;showLoading('Note Search'),pycmd('siac-r-fld '+siacState.selectedDecks.toString()+' ~ '+t)},window.edit=function(e){pycmd('siac-edit-note '+e)},window.updatePinned=function(){let e='siac-pin';$('.pinned').each(function(){e+=' '+$(this).children().first().children().first().attr('id').substring(3)}),$('.noteFloating').each(function(){e+=' '+$(this).attr('id').substring(3)}),pycmd(e)},window.clearSearchResults=function(){let e=document.querySelectorAll('#searchResults .cardWrapper:not(.pinned)');for(var t=0;t<e.length;t++)e[t].remove();try{byId('startInfo').remove(),byId('greyout').style.display='none'}catch(t){}$('.siac-tag-info-box,#siac-results-loader-wrapper').remove(),$('.tagLbl').css('z-index','999')},window.setSearchResults=function(e,t,i,a=1,n=1,s=50,d=-1,o=-1,l=!1,r=!1){let p=new Date().getTime();clearSearchResults();var f=byId('searchResults');f.style.overflowY='hidden',f.style.paddingRight='24px',f.innerHTML+=e,r||siacState.keepPositionAtRendering||!(0<e.length)?siacState.keepPositionAtRendering&&(siacState.keepPositionAtRendering=!1):f.scrollTop=0;let g=1;if(clearTimeout(loadingTimer),i&&lastHadResults&&byId('info-Took')?(byId('info-Took').innerHTML=i.Took,byId('info-Found').innerHTML=i.Found,byId('tagContainer').innerHTML=i.Tags,byId('keywordContainer').innerHTML=i.Keywords):byId('searchInfo').innerHTML=t,lastHadResults=!!i,$searchInfo.hasClass('hidden')||($searchInfo.get(0).style.display='flex'),!renderImmediately){function t(){gridView?$('#nWr-'+(g+50*(a-1))).fadeIn().css('display','inline-block'):$('#nWr-'+(g+50*(a-1))).fadeIn(),setTimeout(function(){g++,g<count?t():(gridView?$('#searchResults .cardWrapper').css('display','inline-block'):$('#searchResults .cardWrapper').show(),f.style.overflowY='auto',f.style.paddingRight='10px',byId('greyout').style.display='none')},time)}if(time=gridView?100:130,count=gridView?16:10,-1<o&&byId('info-took'))if(l){let e=new Date().getTime()-o;byId('info-Took').innerHTML=`<b>${e}</b> ms &nbsp;<b style='cursor: pointer' onclick='pycmd("siac-last-timing ${new Date().getTime()-p}")'><i class='fa fa-info-circle'></i></b>`}else byId('info-Took').innerHTML=`<b>${new Date().getTime()-o}</b> ms`;t(),displayPagination(a,n,s,0<e.length,d)}else if(gridView?$('#searchResults .cardWrapper').css('display','inline-block'):$('#searchResults .cardWrapper').show(),f.style.overflowY='auto',f.style.paddingRight='10px',byId('greyout').style.display='none',displayPagination(a,n,s,0<e.length,d),-1<o&&byId('info-took'))if(l){let e=new Date().getTime()-o;byId('info-Took').innerHTML=`<b>${e}</b> ms &nbsp;<b style='cursor: pointer' onclick='pycmd("siac-last-timing ${new Date().getTime()-p}")'><i class='fa fa-info-circle'></i></b>`}else byId('info-Took').innerHTML=`<b>${new Date().getTime()-o}</b> ms`},window.displayPagination=function(n,s,a,d,o){if(-1!==o){let e='';if(1<o){e+=`<div onclick='pycmd("siac-rerender ${o-2}")' style='display: inline; cursor: pointer;'>Last Results: &nbsp;</div>`;for(var l=0;l<o-1;l++)e+=`<span onclick='pycmd("siac-rerender ${o-l-2}")'>${l+1}</span>`}byId('siac-cache-displ').innerHTML=e}let i='';if(0===s||!d)return byId('siac-pagination-status').innerHTML='',void(byId('siac-pagination-wrapper').innerHTML='');if(1===n&&1==s)i='';else{i+=`<div class='siac-pg-icn' onclick='pycmd("siac-page 1")'>&#171;</div>`,i+=`<div class='siac-pg-icn' onclick='pycmd("siac-page ${t(n-1,1)}")'>&#8249;</div>`;let d=0,a=0;n+5>s&&(d=n+5-s),0>=n-5&&(a=Math.abs(n-5)+1);for(var l=t(n-5-d,1);l<=n+5+a;l++)l==n?i+=`<div class='siac-pg-icn siac-pg-icn-active' onclick='pycmd("siac-page ${l}")'>${l}</div>`:l<=s&&(i+=`<div class='siac-pg-icn' onclick='pycmd("siac-page ${l}")'>${l}</div>`);i+=`<div class='siac-pg-icn' onclick='pycmd("siac-page ${e(n+1,s)}")'>&#8250;</div>`,i+=`<div class='siac-pg-icn' onclick='pycmd("siac-page ${s}")'>&#187;</div>`}byId('siac-pagination-status').innerHTML=`Showing ${50*(n-1)+1} - ${e(a,50*n)} of ${a}`,byId('siac-pagination-wrapper').innerHTML=i},window.sendClickedInformation=function(e,t){let i=document.elementFromPoint(e,t);return'IMG'==i.tagName?'img '+i.src:('SPAN'==i.tagName||'DIV'==i.tagName||'MARK'==i.tagName)&&'siac-inner-card'==i.parentElement.className?'note '+i.parentElement.id+' '+i.parentElement.innerHTML:'siac-inner-card'==i.className?'note '+i.id+' '+i.innerHTML:void 0},window.toggleTooltip=function(e){$(e).children().first().toggle()},window.toggleFreeze=function(e){siacState.isFrozen=!siacState.isFrozen,$(e).hasClass('frozen')?$(e).removeClass('frozen'):$(e).addClass('frozen')},window.hideTop=function(){$('#topContainer').hide(),$('#toggleTop').children().first().html('&#10097;'),pycmd('toggleTop off')},window.toggleTop=function(e){$('#topContainer').toggle(),$('#topContainer').is(':hidden')?($(e).children().first().html('&#10097;'),pycmd('toggleTop off')):($(e).children().first().html('&#10096;'),pycmd('toggleTop on'))},window.toggleGrid=function(e){$(e).is(':checked')?(pycmd('toggleGrid on'),gridView=!0):(pycmd('toggleGrid off'),gridView=!1)},window.activateGridView=function(){gridView=!0,window.setTimeout(function(){$('#gridCb').prop('checked',!0)},400)},window.predefSearchFromSidebar=function(e){let t=siacState.selectedDecks.toString();-1===['lowestPerf','highestPerf','highestRet','lowestRet'].indexOf(e)?pycmd('siac-predef-search '+e+' 200 '+t):(showSearchLoader('<i class=\'fa fa-spinner bold mb-10\' style=\'font-size: 24px;\' /><br>Computing ...'),setTimeout(function(){pycmd('siac-predef-search '+e+' 200 '+t)},250))},window.predefSearch=function(){let t=byId('predefSearchSelect'),e=t.options[t.selectedIndex].value,i=byId('predefSearchNumberSel'),a=i.options[i.selectedIndex].value,n=siacState.selectedDecks.toString();-1===['lowestPerf','highestPerf','highestRet','lowestRet'].indexOf(e)?pycmd('siac-predef-search '+e+' '+a+' '+n):(showSearchLoader('<i class=\'fa fa-spinner bold mb-10\' style=\'font-size: 24px;\' /><br>Computing ...'),setTimeout(function(){pycmd('siac-predef-search '+e+' '+a+' '+n)},250))},window.sort=function(){let t=byId('sortSelect'),e=t.options[t.selectedIndex].value;pycmd('siac-p-sort '+e)},window.toggleAddon=function(){try{'none'!==byId('siac-reading-modal').style.display&&pdfFullscreen?$(document.body).hasClass('siac-fullscreen-show-fields')?$(document.body).removeClass('siac-fullscreen-show-fields').addClass('siac-fullscreen-show-right'):$(document.body).addClass('siac-fullscreen-show-fields').removeClass('siac-fullscreen-show-right'):($('#outerWr').hasClass('onesided')?(showSearchPaneOnLeftSide(),$('#siac-right-side').toggleClass('addon-hidden')):$('#switchBtn').is(':visible')?showSearchPaneOnLeftSide():$('#siac-right-side').toggleClass('addon-hidden'),pycmd('toggleAll '+($('#siac-right-side').hasClass('addon-hidden')?'off':'on'))),onWindowResize(!1)}catch(t){pycmd('siac-notification Failed to toggle: '+t.message)}},window.showSearchPaneOnLeftSide=function(){$('#outerWr').hasClass('onesided')?($('#leftSide').show(),byId('switchBtn').innerHTML='&#10149; Search',$('#outerWr').css('display','flex').removeClass('onesided')):($('#leftSide').hide(),$('#siac-right-side').removeClass('addon-hidden'),byId('switchBtn').innerHTML='&#10149; Back',$('#outerWr').css('display','block').addClass('onesided'),onWindowResize())},window.updateSwitchBtn=function(e){$('#outerWr').hasClass('onesided')||(byId('switchBtn').innerHTML=`&#10149; Search (${e})`)},window.removeNote=function(e){$(byId('cW-'+e).parentElement.parentElement).remove(),updatePinned()},window.getOffset=function(e){for(var t=0,i=0;e&&'siac-right-side'!==e.id&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)t+=e.offsetLeft-e.scrollLeft,i+=e.offsetTop-e.scrollTop,e=e.offsetParent;return{top:i,left:t}},window.calBlockMouseEnter=function(e,t){calTimer=setTimeout(function(){$('#cal-row').is(':hover')&&e.ctrlKey&&(displayCalInfo(t),calTimer=null)},100)},window.displayCalInfo=function(e){let t=getOffset(e.children[0]),i=t.left-153,a=byId('siac-second-col-wrapper').clientWidth-t.left-153;0>i?(i-=t.left-153,document.documentElement.style.setProperty('--tleft',t.left+'px')):document.documentElement.style.setProperty('--tleft','50%'),0>a&&(document.documentElement.style.setProperty('--tleft',-a+153+'px'),i+=a),$('#cal-info').css('left',i+'px').css('top',t.top-275+'px'),byId('cal-info').style.display='block',pycmd('siac-cal-info '+$(e.children[0]).data('index'))},window.calMouseLeave=function(){calTimer=setTimeout(function(){$('#cal-row').is(':hover')||$('#cal-info').is(':hover')||(byId('cal-info').style.display='none'),calTimer=null},300)},window.fieldsBtnClicked=function(){if(siacState.isFrozen)return void pycmd('siac-notification Results are frozen.');if(!$fields.text())return void pycmd('siac-notification Fields are empty.');let e='';showLoading('Typing'),$fields.each(function(t,i){e+=i.innerHTML+'\x1F'}),pycmd('siac-r-fld '+siacState.selectedDecks.toString()+' ~ '+e)},window.showModalSubpage=function(e){$('#modalText').hide(),$('#modal-subpage-inner').html(e),byId('modal-subpage').style.display='flex'},window.hideModalSubpage=function(){$('#modal-subpage-inner').html(''),$('#modal-subpage').hide(),$('#modalText').show()},window.showPDFLoader=function(){let e=pageSidebarDisplayed?230:0;byId('siac-reading-modal-center').innerHTML+=`
    <div id='siac-pdf-loader-wrapper'>
        <div class='siac-pdf-loader' style='margin-right: ${e}px'>
            <div style='margin-top: 7px;'> 
                <div style='margin-bottom: 12px;'><i class="fa fa-download" style='font-size: 25px; color: lightgrey;'></i></div>
                <div id='siac-pdf-loader-text'>Loading PDF file...</div>
            </div>
        </div>
    </div>`},window.showSearchLoader=function(e){if(!byId('siac-results-loader-wrapper')){let t=byId('searchResults');t.scrollTop=0,t.style.overflowY='hidden',$(t).append(`
    <div id='siac-results-loader-wrapper' style='position: absolute; left: 0; right: 0; top: 0; bottom: 0; z-index: 5; height: 100%; text-align: center; background: rgba(0,0,0,0.4); display:flex; align-items: center; justify-content: center; border-radius: 5px;'>
        <div class='siac-search-loader' style='display: inline-block; vertical-align: middle;'>
            <b>${e}</b>
        </div>
    </div>`)}},window.toggleSearchbarMode=function(e){'Mode: Browser'===e.innerHTML?(e.innerHTML='Mode: Add-on',pycmd('siac-searchbar-mode Add-on')):(e.innerHTML='Mode: Browser',pycmd('siac-searchbar-mode Browser'))},window.globalKeydown=function(t){displayedNoteId&&122===t.keyCode?toggleBothBars():pdfDisplayed&&!$('.field').is(':focus')&&pdfViewerKeyup(t)},window.toggleNoteSidebar=function(){byId('siac-notes-sidebar')?pycmd('siac-hide-note-sidebar'):pycmd('siac-show-note-sidebar')},window.focusSearchShortcut=function(){null===displayedNoteId&&byId('siac-browser-search-inp')&&byId('siac-browser-search-inp').focus()},window.triggerSearchShortcut=function(){displayedNoteId||sendContent()},window.addFloatingNote=function(e){let t=$('#'+e.toString()).hasClass('siac-user-note')?`pycmd("siac-edit-user-note ${e}")`:`edit(${e})`,i=byId(e).innerHTML;i=i.replace(/<\/?mark>/g,''),$('#cW-'+e).parent().parent().remove();let a=`<div class='floatingBtnBar'>
        <div class="floatingBtnBarItem" onclick='${t}'>Edit</div>&nbsp;&#65372;
        <div class="floatingBtnBarItem" onclick='searchCardFromFloated("nFC-${e}")'>Search</div>&nbsp;&#65372;
        <div class="floatingBtnBarItem" id='rem-${e}' onclick='byId("nF-${e}").outerHTML = ""; updatePinned();'><span>&#10006;&nbsp;&nbsp;</span></div>
    </div>`,n=`<div id="nF-${e}" class='noteFloating'>
            <div id="nFH-${e}" class='noteFloatingHeader' onmousedown='dragElement(this.parentElement, "nFH-${e}")'>&nbsp;${a}</div>
            <div id="nFC-${e}" class='noteFloatingContent'  onmouseup='getSelectionText()' >${i}</div>
                </div>

